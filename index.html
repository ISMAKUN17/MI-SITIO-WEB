// Supongamos que tienes una función que obtiene las reservas
function obtenerReservas() {
    const db = firebase.firestore();
    db.collection('reservas').get().then((querySnapshot) => {
        const reservas = [];
        querySnapshot.forEach((doc) => {
            reservas.push(doc.data());
        });
        // Ordenar por fecha y hora
        reservas.sort((a, b) => {
            const fechaHoraA = new Date(`${a.date} ${a.time}`);
            const fechaHoraB = new Date(`${b.date} ${b.time}`);
            return fechaHoraA - fechaHoraB;
        });

        // Agrupar por 'place'
        const reservasAgrupadas = reservas.reduce((acc, reserva) => {
            const key = reserva.place;
            if (!acc[key]) {
                acc[key] = [];
            }
            acc[key].push(reserva);
            return acc;
        }, {});

        // Mostrar las reservas en la tabla
        mostrarReservas(reservasAgrupadas);
    });
}

// Función para mostrar reservas en la tabla
function mostrarReservas(reservasAgrupadas) {
    const tablaReservas = document.getElementById('tablaReservas');
    tablaReservas.innerHTML = ''; // Limpiar tabla antes de mostrar nuevas reservas

    for (const place in reservasAgrupadas) {
        // Crear una fila para el lugar
        const filaLugar = document.createElement('tr');
        const celdaLugar = document.createElement('td');
        celdaLugar.colSpan = 4; // Ajusta según el número de columnas que tengas
        celdaLugar.textContent = place; // Nombre del lugar
        celdaLugar.style.fontWeight = 'bold'; // Para resaltar el lugar
        filaLugar.appendChild(celdaLugar);
        tablaReservas.appendChild(filaLugar);

        // Agregar las reservas del lugar
        reservasAgrupadas[place].forEach(reserva => {
            const filaReserva = document.createElement('tr');
            filaReserva.innerHTML = `
                <td>${reserva.date}</td>
                <td>${reserva.time}</td>
                <td>${reserva.name}</td>
                <td>${reserva.notes}</td> <!-- Cambia según los campos que tengas -->
            `;
            tablaReservas.appendChild(filaReserva);
        });
    }
}

// Llama a la función para obtener las reservas al cargar la página
window.onload = obtenerReservas;
